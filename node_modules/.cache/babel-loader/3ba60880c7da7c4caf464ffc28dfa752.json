{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/src/containers/NewNote.js\";\nimport React, { Component } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport config from \"../config\";\nimport \"./NewNote.css\";\nimport { s3Upload } from \"../libs/awsLib\";\n\nvar NewNote =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewNote, _Component);\n\n  function NewNote(props) {\n    var _this;\n\n    _classCallCheck(this, NewNote);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewNote).call(this, props));\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.id, event.target.value));\n    };\n\n    _this.handleFileChange = function (event) {\n      _this.file = event.target.files[0];\n    };\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var attachment;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n\n                if (!(_this.file && _this.file.size > config.MAX_ATTACHMENT_SIZE)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                alert(\"please pick a file smaller than \".concat(config.MAX_ATTACHMENT_SIZE / 1000000, \" MB.\"));\n                return _context.abrupt(\"return\");\n\n              case 4:\n                _this.setState({\n                  isLoading: true\n                });\n\n                _context.prev = 5;\n\n                if (!_this.file) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.next = 9;\n                return s3Upload(_this.file);\n\n              case 9:\n                _context.t0 = _context.sent;\n                _context.next = 13;\n                break;\n\n              case 12:\n                _context.t0 = null;\n\n              case 13:\n                attachment = _context.t0;\n                _context.next = 16;\n                return _this.createNote({\n                  attachment: attachment,\n                  inputOne: _this.state.inputOne,\n                  inputTwo: _this.state.inputTwo,\n                  inputThree: _this.state.inputThree\n                });\n\n              case 16:\n                _this.props.history.push(\"/\");\n\n                _context.next = 24;\n                break;\n\n              case 19:\n                _context.prev = 19;\n                _context.t1 = _context[\"catch\"](5);\n                alert(_context.t1);\n                console.log(_context.t1);\n\n                _this.setState({\n                  isLoading: false\n                });\n\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[5, 19]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.file = null;\n    _this.state = {\n      isLoading: null,\n      inputOne: \"\",\n      inputTwo: \"\",\n      inputThree: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(NewNote, [{\n    key: \"validateForm\",\n    value: function validateForm() {\n      return this.state.inputOne.length > 0 && this.state.inputTwo.length > 0 && this.state.inputThree.length > 0;\n    }\n  }, {\n    key: \"createNote\",\n    value: function createNote(note) {\n      return API.post(\"notes\", \"/\", {\n        body: note\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"NewNote\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        controlId: \"inputOne\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleChange,\n        value: this.state.inputOne,\n        componentClass: \"textarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        controlId: \"inputTwo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleChange,\n        value: this.state.inputTwo,\n        componentClass: \"textarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        controlId: \"inputThree\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleChange,\n        value: this.state.inputThree,\n        componentClass: \"textarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        controlId: \"file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        bsClass: \"uploadLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), \"upload an attachment\"), React.createElement(FormControl, {\n        onChange: this.handleFileChange,\n        type: \"file\",\n        bsClass: \"fileUpload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), React.createElement(LoaderButton, {\n        block: true,\n        bsStyle: \"primary\",\n        bsSize: \"large\",\n        disabled: !this.validateForm(),\n        type: \"submit\",\n        isLoading: this.state.isLoading,\n        text: \"create\",\n        loadingText: \"adding to your memories...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return NewNote;\n}(Component);\n\nexport { NewNote as default };","map":{"version":3,"sources":["/Users/sarasimon/Desktop/projects/serverless-stack/grat-client/src/containers/NewNote.js"],"names":["React","Component","API","FormGroup","FormControl","ControlLabel","LoaderButton","config","s3Upload","NewNote","props","handleChange","event","setState","target","id","value","handleFileChange","file","files","handleSubmit","preventDefault","size","MAX_ATTACHMENT_SIZE","alert","isLoading","attachment","createNote","inputOne","state","inputTwo","inputThree","history","push","console","log","length","note","post","body","validateForm"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport config from \"../config\";\nimport \"./NewNote.css\";\nimport { s3Upload } from \"../libs/awsLib\";\n\n\nexport default class NewNote extends Component {\n  constructor(props) {\n    super(props);\n\n    this.file = null;\n\n    this.state = {\n      isLoading: null,\n      inputOne: \"\",\n      inputTwo: \"\",\n      inputThree: \"\"\n    };\n  }\n\n  validateForm() {\n    return (\n      this.state.inputOne.length > 0 &&\n      this.state.inputTwo.length > 0 &&\n      this.state.inputThree.length > 0\n    );\n  }\n\n  handleChange = event => {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n  }\n\n  handleFileChange = event => {\n    this.file = event.target.files[0];\n  }\n\n  handleSubmit = async event => {\n    event.preventDefault();\n\n    if (this.file && this.file.size > config.MAX_ATTACHMENT_SIZE) {\n      alert(`please pick a file smaller than ${config.MAX_ATTACHMENT_SIZE/1000000} MB.`);\n      return;\n    }\n\n    this.setState({ isLoading: true });\n\n    try {\n      const attachment = this.file\n        ? await s3Upload(this.file)\n        : null;\n        \n      await this.createNote({\n        attachment,\n        inputOne: this.state.inputOne,\n        inputTwo: this.state.inputTwo,\n        inputThree: this.state.inputThree \n      });\n      this.props.history.push(\"/\");\n    } catch(e) {\n      alert(e);\n      console.log(e);\n      this.setState({ isLoading: false });\n    }\n  }\n\n  createNote(note) {\n    return API.post(\"notes\", \"/\", {\n      body: note\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"NewNote\">\n        <form onSubmit={this.handleSubmit}>\n          <FormGroup controlId=\"inputOne\">\n            <FormControl\n              onChange={this.handleChange}\n              value={this.state.inputOne}\n              componentClass=\"textarea\"\n            />\n          </FormGroup>\n          <FormGroup controlId=\"inputTwo\">\n            <FormControl\n              onChange={this.handleChange}\n              value={this.state.inputTwo}\n              componentClass=\"textarea\"\n            />\n          </FormGroup>\n          <FormGroup controlId=\"inputThree\">\n            <FormControl\n              onChange={this.handleChange}\n              value={this.state.inputThree}\n              componentClass=\"textarea\"\n            />\n          </FormGroup>\n          <FormGroup controlId=\"file\">\n            <ControlLabel\n              bsClass=\"uploadLabel\">\n              <i className=\"fa fa-upload\"></i>\n              upload an attachment\n            </ControlLabel>\n            <FormControl\n              onChange={this.handleFileChange}\n              type=\"file\"\n              bsClass=\"fileUpload\"\n            />\n          </FormGroup>\n          <LoaderButton\n            block\n            bsStyle=\"primary\"\n            bsSize=\"large\"\n            disabled={!this.validateForm()}\n            type=\"submit\"\n            isLoading={this.state.isLoading}\n            text=\"create\"\n            loadingText=\"adding to your memories...\"\n          />\n        </form>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}